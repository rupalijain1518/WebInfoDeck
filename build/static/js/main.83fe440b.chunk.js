(this.webpackJsonpinfo_deckjs=this.webpackJsonpinfo_deckjs||[]).push([[0],{60:function(e,t,a){e.exports=a(85)},65:function(e,t,a){},66:function(e,t,a){},85:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(32),c=a.n(l),s=a(11),o=(a(65),a(6)),i=a(7),u=a(15),m=a(9),d=a(8),h=a(57),p=(a(66),a(67),a(68),a(10)),E=a.n(p);a(26),a(72);E.a.initializeApp({apiKey:"AIzaSyCmyCAnEW6rP3_fUvCxtvD63LV7SzaDUIU",authDomain:"infodeck-483ed.firebaseapp.com",databaseURL:"https://infodeck-483ed.firebaseio.com",projectId:"infodeck-483ed",storageBucket:"infodeck-483ed.appspot.com",messagingSenderId:"64162882123",appId:"1:64162882123:web:98bf2bb5a742a07b2b23ce",measurementId:"G-L887XVV1WS"}),E.a.firestore().settings({}),E.a.auth();var b=E.a,f=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={authenticated:!1},n}return Object(i.a)(a,[{key:"logOutUser",value:function(){setTimeout(b.auth().signOut(),3e3)}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarSupportedContent"},r.a.createElement("ul",{className:"navbar-nav mr-auto"},r.a.createElement("li",{className:"nav-item"},r.a.createElement(s.c,{className:"nav-link",exact:!0,to:"/users"},"Users")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(s.c,{className:"nav-link",exact:!0,to:"/retailers"},"Retailers")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(s.c,{className:"nav-link",exact:!0,to:"/packages"},"Packages")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(s.c,{className:"nav-link",exact:!0,to:"/search"},"Search"))),r.a.createElement("ul",{className:"navbar-nav nav-right"},r.a.createElement("li",{className:"nav-item"},"        ",r.a.createElement(s.c,{className:"nav-link",exact:!0,to:"/logout"},r.a.createElement("button",{onClick:this.logOutUser,type:"button",className:"btn btn-dark"},"logout"))))))}}]),a}(n.Component),g=function(){return r.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarSupportedContent"},r.a.createElement("ul",{className:"navbar-nav mr-auto"},r.a.createElement("li",{className:"nav-item "},r.a.createElement(s.c,{className:"nav-link",exact:!0,to:"/"},"Home ",r.a.createElement("span",{className:"sr-only"},"(current)")))),r.a.createElement("ul",{className:"navbar-nav nav-right"},r.a.createElement("li",{className:"nav-item"},r.a.createElement(s.c,{className:"nav-link",exact:!0,to:"/login"},"Login"))))},v=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){return Object(o.a)(this,a),t.call(this,e)}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-dark bg-dark"},r.a.createElement("a",{className:"navbar-brand"},"InfoDeck"),!1===this.props.authenticated?r.a.createElement(g,null):r.a.createElement(f,null))}}]),a}(n.Component),k=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).onCollectionUpdate=function(e){var t=[];e.forEach((function(e){var a=e.data(),n=a.name,r=a.profilrUrl,l=a.userName,c=a.gst,s=a.retailerId,o=a.userId,i=a.address,u=a.phone,m=a.location;t.push({key:e.id,doc:e,name:n,profilrUrl:r,userName:l,gst:c,retailerId:s,userId:o,address:i,phone:u,location:m})})),n.setState({users:t})},n.updateSearch=function(e){n.setState({search:e.target.value})},n.ref=E.a.firestore().collection("retailersList"),n.unsubscribe=null,n.state={users:[],search:""},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.unsubscribe=this.ref.orderBy("name","asc").onSnapshot(this.onCollectionUpdate)}},{key:"render",value:function(){var e=this.state.search,t=this.state.users.filter((function(t){return-1!==t.name.toString().toLowerCase().indexOf(e.toString().toLowerCase())}));return r.a.createElement("div",null," ",r.a.createElement("br",null),r.a.createElement("div",{className:"form-group"}," ",r.a.createElement("label",{htmlFor:"exampleInputEmail1"},"Place your text  "),r.a.createElement("input",{id:"search",type:"text",className:"form-control",placeholder:"Search ..",name:"search",value:this.state.search,onChange:this.updateSearch}),r.a.createElement("br",null)),r.a.createElement("h1",null," List Of Retailers"),r.a.createElement("br",null),r.a.createElement("table",{className:"table table-striped table-sm"},r.a.createElement("thead",{className:"table-striped"},r.a.createElement("tr",null,r.a.createElement("th",null," Retailer Id "),r.a.createElement("th",null,"Retailer Name"),r.a.createElement("th",null,"User Id"),r.a.createElement("th",null,"User Name"),r.a.createElement("th",null,"Detail"))),r.a.createElement("tbody",null,t.map((function(e){return r.a.createElement("tr",{key:e.key},r.a.createElement("td",null," ",e.key," "),r.a.createElement("td",null,e.name),r.a.createElement("td",null,e.userId),r.a.createElement("td",null,e.userName),r.a.createElement("td",null," ",r.a.createElement(s.b,{to:"/showRetailer/".concat(e.key),className:"btn btn-secondary"},"View")," "))})))))}}]),a}(n.Component),y=a(33),N=a(27),S=a.n(N),C=a(31),x=a(38),O=a(101),j=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){var e;return Object(o.a)(this,a),(e=t.call(this)).handleSubmit=function(){var t=Object(C.a)(S.a.mark((function t(a){var n,r,l;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(a.preventDefault(),n=[],r=e.state.from;r<=e.state.to;r++)n.push(e.state.prefix+r),e.setState({names:n},(function(){}));l=x.firestore(),e.state.names.map(function(){var t=Object(C.a)(S.a.mark((function t(a){return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""!==e.state.id1&&"Select"!==e.state.id1){t.next=4;break}e.setState({error:"Please select user"},(function(){})),t.next=8;break;case 4:return t.next=6,l.collection("packages").doc(a).set({name:a,check:!1,userId:e.state.id1}).finally((function(e){console.log("Succefully inserted packages",e)})).catch((function(e){console.log("error occured",e)}));case 6:return t.next=8,l.collection("users").doc(e.state.id1).collection("assignedpackages").doc(a).set({name:a,check:!1},{merge:!0}).finally((function(e){console.log("Succefully assigned Packages",e)})).catch((function(e){console.log("error occured",e)}));case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onCollectionUpdate=function(t){var a=[];t.forEach((function(e){var t=e.data().name;a.push({key:e.id,doc:e,name:t})})),e.setState({users:a},(function(){}))},e.handleChange=function(t){e.setState(Object(y.a)({},t.target.name,t.target.value),(function(){}))},e.ref=x.firestore().collection("users"),e.unsubscribe=null,e.handleSubmit=e.handleSubmit.bind(Object(u.a)(e)),e.handleChange=e.handleChange.bind(Object(u.a)(e)),e.state={names:[],from:"",to:"",prefix:"",id1:"",email:"",check:!0,users:[],key:"",error:null},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.unsubscribe=this.ref.onSnapshot(this.onCollectionUpdate)}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement("h1",null,"Add Package"),r.a.createElement("br",null),r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"exampleInputPassword1"},"Enter kit's prefix"),r.a.createElement("input",{required:!0,type:"text",value:this.state.prefix,onChange:this.handleChange,className:"form-control",id:"prefix",name:"prefix",placeholder:"Kit serial Number"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"exampleInputPassword1"},"From"),r.a.createElement("input",{required:!0,type:"text",value:this.state.from,onChange:this.handleChange,className:"form-control",id:"from",name:"from",placeholder:"Kit serial Number"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"exampleInputPassword1"},"To"),r.a.createElement("input",{required:!0,type:"text",value:this.state.to,onChange:this.handleChange,className:"form-control",id:"to",name:"to",placeholder:"Kit serial Number"})),r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"exampleInputPassword1"},"Select User"),r.a.createElement("br",null),this.state.error?r.a.createElement("p",{className:"text-danger"},this.state.error):null,r.a.createElement("select",{placeholder:"select you choice",className:"browser-default custom-select",name:"id1",value:this.state.id1,onChange:this.handleChange},r.a.createElement("option",{key:"Select",value:"Select"}," Select "),this.state.users.map((function(e,t){return r.a.createElement("option",{key:e.key,value:e.key},e.name)})))),r.a.createElement("br",null),r.a.createElement("div",{className:"form-group"},r.a.createElement(O.a,{to:"/addPackages"},r.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Submit")," "))))}}]),a}(n.Component),U=a(100),w=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).updateSearch=function(e){n.setState({search:e.target.value})},n.onCollectionUpdate=function(e){var t=[];e.forEach((function(e){var a=e.data(),n=a.name,r=a.check;t.push({key:e.id,doc:e,name:n,check:r})})),n.setState({packages:t})},n.toggleHandler=function(){var e=n.state.display;n.setState({display:!e}),console.log(n.state.display)},n.toggleHandler=n.toggleHandler.bind(Object(u.a)(n)),n.ref=E.a.firestore().collection("packages"),n.unsubscribe=null,n.state={packages:[],display:!1,search:""},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.unsubscribe=this.ref.orderBy("name","asc").onSnapshot(this.onCollectionUpdate)}},{key:"render",value:function(){var e=this,t=this.state.search,a=this.state.packages.filter((function(e){return-1!==e.name.toString().toLowerCase().indexOf(t.toString().toLowerCase())}));return r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement("div",{className:"form-group"}," ",r.a.createElement("label",{htmlFor:"exampleInputEmail1"},"Place your text  "),r.a.createElement("input",{id:"search",type:"text",className:"form-control",placeholder:"Search ..",name:"search",value:this.state.search,onChange:this.updateSearch}),r.a.createElement("br",null)),r.a.createElement("h1",null," List Of Packages"),r.a.createElement("br",null),r.a.createElement("table",{className:"table table-striped table-sm"},r.a.createElement("thead",{className:"table-striped"},r.a.createElement("tr",null,r.a.createElement("th",null,"Package Id"),r.a.createElement("th",null,"View Package"),r.a.createElement("th",null,"Assign "),r.a.createElement("th",null,"Activate "))),r.a.createElement("tbody",null,a.map((function(t){return r.a.createElement("tr",{key:t.key},r.a.createElement("td",null,t.key),r.a.createElement("td",null,r.a.createElement(s.b,{to:"/showPackage/".concat(t.key),className:"btn btn-secondary"},"View")),r.a.createElement("td",null,!0===t.check?r.a.createElement(s.b,{to:"/assignPackage/".concat(t.key),className:"btn btn-secondary"},"Assign"):r.a.createElement("label",{htmlFor:"exampleInputEmail1"},"Assigned")),r.a.createElement("td",null,r.a.createElement(U.a,{id:"activate",size:"medium",color:"primary",value:e.state.display,onChange:e.toggleHandler})))})))))}}]),a}(n.Component),I=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"package container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s12 m6"},r.a.createElement(w,null)),r.a.createElement("div",{className:"col s12 m5 offset-m1"},r.a.createElement(j,null))))}}]),a}(n.Component),P=a(12),D=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){var e;return Object(o.a)(this,a),(e=t.call(this)).state={id1:"",key:"",email:""},e.handleSubmit=function(){var t=Object(C.a)(S.a.mark((function t(a){var n;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),n=x.firestore(),t.next=4,n.collection("users").doc(e.state.id1).get().then((function(t){e.setState({email:t.data().email})}));case 4:return t.next=6,n.collection("users").doc(e.state.id1).collection("assignedpackages").doc(e.props.match.params.id).set({name:e.props.match.params.id,check:!1},{merge:!0});case 6:return t.next=8,n.collection("packages").doc(e.props.match.params.id).set({check:!1,email:e.state.email,id1:e.state.id1},{merge:!0});case 8:console.log(" detialss",e.state.email,e.state.id1),e.props.history.push("/packages");case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleChange=function(t){e.setState({id1:t.target.value})},e.handleSubmit=e.handleSubmit.bind(Object(u.a)(e)),e.handleChange=e.handleChange.bind(Object(u.a)(e)),e}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement("h1",null,"Assign Package"),r.a.createElement("br",null),r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"exampleInputPassword1"},"Enter User's ID"),r.a.createElement("input",{required:!0,type:"text",value:this.state.id1,onChange:this.handleChange,className:"form-control",id:"name",placeholder:"User's id number"})),r.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Submit")))}}]),a}(n.Component),L=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).handleSubmit=function(e){e.preventDefault(),"admin@gmail.com"===n.state.email&&"admin1"===n.state.password?b.auth().signInWithEmailAndPassword(n.state.email,n.state.password).then((function(e){n.props.setCurrentUser(e),console.log(n.props.setCurrentUser(e)),n.setState({redirect:!0},(function(){console.log("redirect state changed")}))})).catch((function(e){n.setState({error:e},(function(){console.log("error occured")}))})):b.auth().signInWithEmailAndPassword(n.state.email,n.state.password).then().catch((function(e){n.setState({error:e},(function(){console.log("error occured")}))}))},n.handleChange=function(e){n.setState(Object(y.a)({},e.target.id,e.target.value))},n.handleSubmit=n.handleSubmit.bind(Object(u.a)(n)),n.handleChange=n.handleChange.bind(Object(u.a)(n)),n.state={redirect:!1,email:"",password:"",error:""},n}return Object(i.a)(a,[{key:"render",value:function(){var e=(this.props.location.state||{from:{pathname:"/packages"}}).from;return!0===this.state.redirect?r.a.createElement(P.a,{to:e}):r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement("h1",null,"Welcome to InfoDeck"),r.a.createElement("br",null),this.state.error&&r.a.createElement("p",{className:"text-danger"},this.state.error.message),r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"exampleInputEmail1"},"Email address"),r.a.createElement("input",{required:!0,value:this.email,type:"email",onChange:this.handleChange,className:"form-control",id:"email","aria-describedby":"emailHelp",placeholder:"Enter email"}),r.a.createElement("small",{id:"emailHelp",className:"form-text text-muted"},"We'll never share your email with anyone else.")),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"exampleInputPassword1"},"Password"),r.a.createElement("input",{required:!0,value:this.password,type:"password",onChange:this.handleChange,className:"form-control",id:"password",placeholder:"Password"})),r.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Submit")))}}]),a}(n.Component),A=function(){return r.a.createElement("div",{className:"not-found"},r.a.createElement("div",{class:"alert alert-danger"},r.a.createElement("strong",null,"Danger!"),"Page Not Found."))},R=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).onCollectionUpdate=function(e){var t=[];e.forEach((function(e){var a=e.data(),n=a.name,r=a.email,l=a.address,c=a.phone,s=a.location;t.push({key:e.id,doc:e,name:n,email:r,address:l,phone:c,location:s})})),n.setState({users:t})},n.updateSearch=function(e){n.setState({search:e.target.value})},n.ref=E.a.firestore().collection("users"),n.updateSearch=n.updateSearch.bind(Object(u.a)(n)),n.unsubscribe=null,n.state={users:[],search:""},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.unsubscribe=this.ref.orderBy("name","asc").onSnapshot(this.onCollectionUpdate)}},{key:"render",value:function(){var e=this.state.search,t=this.state.users.filter((function(t){return-1!==t.name.toString().toLowerCase().indexOf(e.toString().toLowerCase())}));return r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement("div",{className:"form-group"}," ",r.a.createElement("label",{htmlFor:"exampleInputEmail1"},"Place your text  "),r.a.createElement("input",{id:"search",type:"text",className:"form-control",placeholder:"Search ..",name:"search",value:this.state.search,onChange:this.updateSearch}),r.a.createElement("br",null)),r.a.createElement("h1",null," List Of Users"),r.a.createElement("br",null),r.a.createElement("table",{className:"table table-striped table-sm"},r.a.createElement("thead",{className:"table-striped"},r.a.createElement("tr",null,r.a.createElement("th",null," User Id "),r.a.createElement("th",null,"User Name"),r.a.createElement("th",null,"User Email"),r.a.createElement("th",null,"Detail"))),r.a.createElement("tbody",null,t.map((function(e){return r.a.createElement("tr",{key:e.key},r.a.createElement("td",null," ",e.key," "),r.a.createElement("td",null,e.name),r.a.createElement("td",null,e.email),r.a.createElement("td",null," ",r.a.createElement(s.b,{to:"/showUser/".concat(e.key),className:"btn btn-secondary"},"View")," "))})))))}}]),a}(n.Component),B=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).onCollectionUpdate=function(e){var t=[];e.forEach((function(e){t.push({keyPack:e.id,doc:e})})),n.setState({packages:t}),console.log("packages array",t)},n.state={user:{},key:"",packages:[],keyPack:""},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this;E.a.firestore().collection("users").doc(this.props.match.params.id).get().then((function(t){t.exists&&(e.setState({user:t.data(),key:t.id}),E.a.firestore().collection("users").doc(e.props.match.params.id).collection("assignedpackages").onSnapshot(e.onCollectionUpdate))}))}},{key:"delete",value:function(e){var t=this;E.a.firestore().collection("users").doc(e).delete().then((function(){console.log("Document successfully deleted!"),t.props.history.push("/users")})).catch((function(e){console.error("Error removing document: ",e)}))}},{key:"render",value:function(){return r.a.createElement("div",{className:"package container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s12 m6"},r.a.createElement("div",{className:"card text-center",styles:"width: 18rem;"},r.a.createElement("br",null),r.a.createElement("center",null,this.state.user.profileUrl?r.a.createElement("img",{src:this.state.user.profileUrl,alt:"",className:"rounded",height:"170px",width:"170px"}):"No picture"),r.a.createElement("div",{className:"card-body"},r.a.createElement("h5",{className:"card-title"},this.state.user.name," "),r.a.createElement("p",{className:"card-text"},r.a.createElement("small",{className:"text-muted"},this.state.user.email))),r.a.createElement("ul",{className:"list-group list-group-flush"},this.state.user.phone?r.a.createElement("li",{className:"list-group-item"}," ",this.state.user.phone," "):null,this.state.user.address?r.a.createElement("li",{className:"list-group-item"}," ",this.state.user.address," "):null,this.state.user.location?r.a.createElement("li",{className:"list-group-item"}," ",this.state.user.location," "):null),r.a.createElement("div",{className:"card-body"},r.a.createElement("button",{onClick:this.props.history.goBack,className:"btn btn-secondary"},"Back")," \xa0\xa0",r.a.createElement("button",{onClick:this.delete.bind(this,this.state.key),className:"btn btn-danger"},"Delete")))),r.a.createElement("div",{className:"col s12 m5 offset-m1"},r.a.createElement("br",null),this.state.packages?r.a.createElement("table",{className:"table"},r.a.createElement("thead",{className:"table-striped"},r.a.createElement("tr",null,r.a.createElement("th",null,"Package Name"))),r.a.createElement("tbody",null,this.state.packages.map((function(e){return r.a.createElement("tr",{key:e.key},r.a.createElement("td",null,e.keyPack))})))):null)))}}]),a}(n.Component),F=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={user:{},key:""},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this;E.a.firestore().collection("packages").doc(this.props.match.params.id).get().then((function(t){t.exists?e.setState({user:t.data(),key:t.id}):console.log("No such document!")}))}},{key:"delete",value:function(e,t){var a=this;E.a.firestore().collection("packages").doc(e).delete().then((function(){a.props.history.push("/packages")})).catch((function(e){console.error("Error removing document: ",e)})),t&&E.a.firestore().collection("users").doc(t).collection("assignedpackages").doc(e).delete().then((function(){console.error("removed from package and users"),a.props.history.push("/packages")})).catch((function(e){console.error("Error removing document: ",e)}))}},{key:"render",value:function(){return r.a.createElement("div",{className:"container"},r.a.createElement("br",null),r.a.createElement("div",{className:"card",styles:"width: 18rem;"},r.a.createElement("div",{className:"card-body"},r.a.createElement("h5",{className:"card-title"},this.state.user.name," "),this.state.user.userId?r.a.createElement("h6",{className:"card-subtitle mb-2 text-muted"},this.state.user.userId," "):null,this.state.user.email?r.a.createElement("h6",{className:"card-subtitle mb-2 text-muted"},this.state.user.email," "):null,r.a.createElement("button",{onClick:this.props.history.goBack,className:"btn btn-secondary"},"Back")," \xa0\xa0",r.a.createElement("button",{onClick:this.delete.bind(this,this.state.key,this.state.user.userId),className:"btn btn-danger"},"Delete"))))}}]),a}(n.Component),V=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).onCollectionUpdate=function(e){console.log("into given packages");var t=[];e.forEach((function(e){t.push({keyPack:e.id,doc:e})})),n.setState({packages:t}),console.log("packages array",t)},n.unsubscribe=null,n.state={user:{},key:"",gst1:[],packages:[],key1:"",keyPack:""},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this;E.a.firestore().collection("retailersList").doc(this.props.match.params.id).get().then((function(t){var a=[],n=t.data().gstInfo;n&&a.push({tradeNam:n.tradeNam,lgnm:n.lgnm,addr:n.addr,ctb:n.ctb,lstupdt:n.lstupdt,sts:n.sts}),e.setState({user:t.data(),key:t.id,key1:t.data().userId,gst1:a},(function(){}));var r=E.a.firestore().collection("users").doc(e.state.key1).collection("retailers").doc(e.props.match.params.id).collection("givenpackages");console.log(e.state.key,e.state.key1),r.onSnapshot?r.onSnapshot(e.onCollectionUpdate):console.log("somthing went wrong")}))}},{key:"delete",value:function(e){var t=this;E.a.firestore().collection("retailersList").doc(e).delete().then((function(){console.log("Document successfully deleted!"),t.props.history.push("/retailers")})).catch((function(e){console.error("Error removing document: ",e)}))}},{key:"render",value:function(){return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s12 m6"},r.a.createElement("br",null),r.a.createElement("div",{className:"card text-center",styles:"width: 18rem;"},r.a.createElement("br",null),r.a.createElement("center",null,"  ",this.state.user.profileUrl?r.a.createElement("img",{src:this.state.user.profileUrl,alt:"...",class:"rounded",height:"170px",width:"170px"}):"No picture"),r.a.createElement("div",{className:"card-body"},r.a.createElement("h5",{className:"card-title"},this.state.user.name," "),r.a.createElement("p",{className:"card-text"},r.a.createElement("small",{className:"text-muted"},this.state.user.email))),r.a.createElement("ul",{className:"list-group list-group-flush"},r.a.createElement("li",{className:"list-group-item"},"User Id :",this.state.key1),r.a.createElement("li",{className:"list-group-item"},this.state.user.phone),r.a.createElement("li",{className:"list-group-item"},this.state.user.address),r.a.createElement("li",{className:"list-group-item"},this.state.user.location?this.state.user.location:"Not Available")),r.a.createElement("div",{className:"card-body"},r.a.createElement("button",{onClick:this.props.history.goBack,className:"btn btn-secondary"},"Back")," \xa0\xa0",r.a.createElement("button",{onClick:this.delete.bind(this,this.state.key),className:"btn btn-danger"},"Delete")))),r.a.createElement("div",{className:"col s12 m5 offset-m1"},r.a.createElement("br",null),this.state.user.gst&&"not available"!==this.state.user.gst?r.a.createElement("h5",null," GST NUMBER: ",this.state.user.gst):null,r.a.createElement("br",null),this.state.gst1?r.a.createElement("table",{className:"table"},r.a.createElement("thead",{className:"table-striped"},r.a.createElement("tr",null,r.a.createElement("th",null,"Retailer trade Name"),r.a.createElement("th",null,"Retailer Status"),r.a.createElement("th",null,"Retailer address"))),r.a.createElement("tbody",null,this.state.gst1.map((function(e){return r.a.createElement("tr",{key:e.key},r.a.createElement("td",null,e.tradeNam),r.a.createElement("td",null,e.sts),r.a.createElement("td",null,e.addr))})))):null,r.a.createElement("div",null,r.a.createElement("br",null),this.state.packages?r.a.createElement("table",{className:"table"},r.a.createElement("thead",{className:"table-striped"},r.a.createElement("tr",null,r.a.createElement("th",null,"Package Name"))),r.a.createElement("tbody",null,this.state.packages.map((function(e){return r.a.createElement("tr",{key:e.key},r.a.createElement("td",null,e.keyPack))})))):null)))}}]),a}(n.Component),M=function(){return r.a.createElement("div",{className:"not-found"},r.a.createElement("div",{className:"alert alert-success",role:"alert"},"Successfully Logged Out!!"))},W=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).onCollectionRetailers=function(e){var t=[];e.forEach((function(e){var a=e.data(),n=a.name,r=a.profilrUrl,l=a.userName,c=a.gst,s=a.retailerId,o=a.userId,i=a.address,u=a.phone,m=a.location;t.push({key:e.id,doc:e,name:n,profilrUrl:r,userName:l,gst:c,retailerId:s,userId:o,address:i,phone:u,location:m})})),n.setState({users:t})},n.onCollectionPackages=function(e){var t=[];e.forEach((function(e){var a=e.data(),n=a.name,r=a.check;t.push({key:e.id,doc:e,name:n,check:r})})),n.setState({users:t})},n.onCollectionUsers=function(e){var t=[];e.forEach((function(e){var a=e.data(),n=a.name,r=a.email,l=a.address,c=a.phone,s=a.location;t.push({key:e.id,doc:e,name:n,email:r,address:l,phone:c,location:s})})),n.setState({users:t})},n.handleSubmit=function(){var e=Object(C.a)(S.a.mark((function e(t){var a,r,l;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),"users"!==n.state.id1){e.next=7;break}return a=E.a.firestore(),e.next=5,a.collection(n.state.id1).orderBy("name","asc").onSnapshot(n.onCollectionUsers);case 5:e.next=19;break;case 7:if("retailersList"!==n.state.id1){e.next=13;break}return r=E.a.firestore(),e.next=11,r.collection(n.state.id1).orderBy("name","asc").onSnapshot(n.onCollectionRetailers);case 11:e.next=19;break;case 13:if("packages"!==n.state.id1){e.next=19;break}return l=E.a.firestore(),e.next=17,l.collection(n.state.id1).orderBy("name","asc").onSnapshot(n.onCollectionPackages);case 17:e.next=19;break;case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.handleChange=function(e){n.setState(Object(y.a)({},e.target.name,e.target.value)),console.log(n.state.id1)},n.updateSearch=function(e){n.setState({search:e.target.value})},n.updateSearch=n.updateSearch.bind(Object(u.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(u.a)(n)),n.handleChange=n.handleChange.bind(Object(u.a)(n)),n.unsubscribe=null,n.state={users:[],id1:"",search:""},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this,t=this.state.search,a=this.state.users.filter((function(e){return-1!==e.name.toString().toLowerCase().indexOf(t.toString().toLowerCase())}));return r.a.createElement("div",null,r.a.createElement("div",null,"   ",r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("br",null),r.a.createElement("label",{htmlFor:"exampleInputEmail1"},"Select option "),r.a.createElement("br",null),r.a.createElement("select",{className:"browser-default custom-select",name:"id1",value:this.state.id1,onChange:this.handleChange},r.a.createElement("option",{key:"Select",value:"Select"},"  Select "),r.a.createElement("option",{key:"packages",value:"packages"},"Packages"),r.a.createElement("option",{key:"users",value:"users"},"Users"),r.a.createElement("option",{key:"retailersList",value:"retailersList"},"Retailers")),r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Submit")," "))),r.a.createElement("br",null),r.a.createElement("div",{className:"input-group"},r.a.createElement("input",{id:"email",type:"text",className:"form-control",placeholder:"Search ..",name:"search",value:this.state.search,onChange:this.updateSearch}),r.a.createElement("br",null)),"users"===this.state.id1?r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement("table",{className:"table"},r.a.createElement("thead",{className:"thead-dark"},r.a.createElement("tr",null,r.a.createElement("th",null," User Id "),r.a.createElement("th",null,"User Name"),r.a.createElement("th",null,"User Email"),r.a.createElement("th",null,"Detail"))),r.a.createElement("tbody",null,a.map((function(e){return r.a.createElement("tr",{key:e.key},r.a.createElement("td",null," ",e.key," "),r.a.createElement("td",null,e.name),r.a.createElement("td",null,e.email),r.a.createElement("td",null," ",r.a.createElement(s.b,{to:"/showUser/".concat(e.key),className:"btn btn-secondary"},"View")," "))}))))):"packages"===this.state.id1?r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement("table",{className:"table"},r.a.createElement("thead",{className:"thead-dark"},r.a.createElement("tr",null,r.a.createElement("th",null,"Package Id"),r.a.createElement("th",null,"View Package"),r.a.createElement("th",null,"Assign "),r.a.createElement("th",null,"Activate "))),r.a.createElement("tbody",null,a.map((function(t){return r.a.createElement("tr",{key:t.key},r.a.createElement("td",null,t.key),r.a.createElement("td",null,r.a.createElement(s.b,{to:"/showPackage/".concat(t.key),className:"btn btn-secondary"},"View")),r.a.createElement("td",null,!0===t.check?r.a.createElement(s.b,{to:"/assignPackage/".concat(t.key),className:"btn btn-secondary"},"Assign"):r.a.createElement("label",{htmlFor:"exampleInputEmail1"},"Assigned")),r.a.createElement("td",null,r.a.createElement(U.a,{id:"activate",size:"medium",color:"primary",value:e.state.display,onChange:e.toggleHandler})))}))))):r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement("table",{className:"table"},r.a.createElement("thead",{className:"table-striped"},r.a.createElement("tr",null,r.a.createElement("th",null," Retailer Id "),r.a.createElement("th",null,"Retailer Name"),r.a.createElement("th",null,"User Id"),r.a.createElement("th",null,"User Name"),r.a.createElement("th",null,"Detail"))),r.a.createElement("tbody",null,a.map((function(e){return r.a.createElement("tr",{key:e.key},r.a.createElement("td",null," ",e.key," "),r.a.createElement("td",null,e.name),r.a.createElement("td",null,e.userId),r.a.createElement("td",null,e.userName),r.a.createElement("td",null," ",r.a.createElement(s.b,{to:"/showRetailer/".concat(e.key),className:"btn btn-secondary"},"View")," "))}))))))}}]),a}(n.Component);function H(e){var t=e.component,a=e.authenticated,n=Object(h.a)(e,["component","authenticated"]);return r.a.createElement(P.b,Object.assign({},n,{render:function(e){return!1===a?r.a.createElement(P.a,{to:{pathname:"/login",state:{from:e.location}}}):r.a.createElement(t,Object.assign({},e,n))}}))}var q=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){var e;return Object(o.a)(this,a),(e=t.call(this)).setCurrentUser=e.setCurrentUser.bind(Object(u.a)(e)),e.state={authenticated:!1,currentUser:null},e}return Object(i.a)(a,[{key:"setCurrentUser",value:function(e){e?this.setState({currentUser:!0,authenticated:!0}):this.setState({currentUser:!1,authenticated:!1})}},{key:"componentDidMount",value:function(){var e=this;this.removeAuthListener=b.auth().onAuthStateChanged((function(t){t?e.setState({authenticated:!0,currentUser:!0}):e.setState({authenticated:!1,currentUser:!1})}))}},{key:"componentWillUnmount",value:function(){this.removeAuthListener()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"App"},r.a.createElement(s.a,null,r.a.createElement(v,{authenticated:this.state.authenticated}),r.a.createElement(P.d,null,r.a.createElement(P.b,{exact:!0,path:"/",render:function(t){return r.a.createElement(L,Object.assign({setCurrentUser:e.setCurrentUser},t))}}),r.a.createElement(P.b,{exact:!0,path:"/login",render:function(t){return r.a.createElement(L,Object.assign({setCurrentUser:e.setCurrentUser},t))}}),r.a.createElement(H,{authenticated:this.state.currentUser,exact:!0,path:"/users",component:R}),r.a.createElement(H,{authenticated:this.state.currentUser,exact:!0,path:"/retailers",component:k}),r.a.createElement(H,{authenticated:this.state.currentUser,exact:!0,path:"/packages",component:I}),r.a.createElement(H,{authenticated:this.state.currentUser,exact:!0,path:"/addPackages",component:j}),r.a.createElement(H,{authenticated:this.state.currentUser,exact:!0,path:"/search",component:W}),r.a.createElement(H,{authenticated:this.state.currentUser,exact:!0,path:"/showRetailer/:id",component:V}),r.a.createElement(H,{authenticated:this.state.currentUser,exact:!0,path:"/assignPackage/:id",component:D}),r.a.createElement(H,{authenticated:this.state.currentUser,exact:!0,path:"/showUser/:id",component:B}),r.a.createElement(H,{authenticated:this.state.currentUser,exact:!0,path:"/showPackage/:id",component:F}),r.a.createElement(H,{authenticated:this.state.currentUser,exact:!0,path:"/addPackages",component:j}),r.a.createElement(P.b,{exact:!0,path:"/logout",component:M}),r.a.createElement(P.b,{component:A}))))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(s.a,null,r.a.createElement(q,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[60,1,2]]]);
//# sourceMappingURL=main.83fe440b.chunk.js.map